
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="~/Image/Header/faviconIMG.png" type="image/png">
    <link rel="stylesheet" href="~/Content/Header.css" />
    <link rel="stylesheet" href="~/Content/Footer.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
          integrity="sha512-nVo7Wk..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>@ViewBag.Title - Bookara</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @RenderSection("Styles", required: false)
</head>
<body>
    @{
        // Lấy giỏ hàng từ Session
        var cart = Session["Cart"] as Frontend_12102025.Models.ViewModel.Cart;
        int cartCount = 0;

        if (cart != null && cart.Items.Any())
        {
            cartCount = cart.Items.Sum(i => i.Quantity);
        }
    }

    @* 1. Header *@
    <header style="width: 100%; height: 20%;">
        <section class="header">
            <!-- Logo -->
            <a href="@Url.Action("Index", "Home")" id="container-img-header">
                <img src="~/Image/Header/Logo.png" alt="Logo image">
            </a>

            <!-- Search -->
            @*Loi search*@ 
            <section class="searchProd">
                <div class="container-fluid">
                    <form action="@Url.Action("Index", "Home")" method="get" class="search-form">
                        <div class="search-wrapper">
                            <input type="text"
                                   name="SearchTerm"
                                   class="search-input"
                                   placeholder="Tìm kiếm sách, tác giả..."
                                   value="@Request.QueryString["SearchTerm"]"
                                   autocomplete="off" />
                            <button type="submit" class="search-btn">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </section>


            <!-- Login/Logout & Cart -->
            <div class="icon">
                <!-- Login Container -->
                <div class="login-container">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <div class="user-menu">
                            <a href="#" class="user-link">
                                <i class="fa-regular fa-circle-user" style="color: #0d0d0d;"></i>
                                <span>@User.Identity.Name</span>
                            </a>
                            <div class="user-dropdown">
                                <a href="@Url.Action("ProfileInfo", "Account")">
                                    <i class="fa-solid fa-user"></i> Thông tin tài khoản
                                </a>
                                <a href="@Url.Action("MyOrder", "Order")">
                                    <i class="fa-solid fa-clock-rotate-left"></i> Lịch sử mua hàng
                                </a>
                                <a href="@Url.Action("Logout", "Account")"
                                   onclick="return confirm('Bạn có chắc chắn muốn đăng xuất?');">
                                    <i class="fa-solid fa-right-from-bracket"></i> Đăng xuất
                                </a>
                            </div>
                        </div>
                    }
                    else
                    {
                        <a href="@Url.Action("Login", "Account")">
                            <i class="fa-regular fa-circle-user" style="color: #0d0d0d;"></i>
                        </a>
                    }
                </div>

                <!-- Cart Container -->
                <div class="cart-container">
                    <a href="@Url.Action("Index", "Cart")">
                        <i class="fa-solid fa-cart-shopping" style="color: #19191a;"></i>
                        @if (cartCount > 0)
                        {
                            <span class="cart-badge" id="cart-count">@cartCount</span>
                        }
                        else
                        {
                            <span class="cart-badge" id="cart-count" style="display: none;">0</span>
                        }
                    </a>
                </div>
            </div>
        </section>

        <!-- Navigation bar menu in header -->
        <div class="container-nav-bar">
            <nav class="nav-bar-header">
                <ul class="nav-bar">
                    <li>
                        <a href="@Url.Action("Index", "Home")">
                            <i class="fa-solid fa-house" style="color: black;"></i>
                        </a>
                    </li>
                    <li><a href="@Url.Action("Index", "Category", new { categoryName = "Khoa-hoc" })">Khoa học</a></li>
                    <li><a href="@Url.Action("Index", "Category", new { categoryName = "Tam-ly-hoc" })">Tâm lý học</a></li>
                    <li><a href="@Url.Action("Index", "Category", new { categoryName = "Van-hoc" })">Văn học</a></li>
                    <li><a href="@Url.Action("Index", "Category", new { categoryName = "Kinh-te" })">Kinh tế</a></li>
                    <li><a href="@Url.Action("Index", "Category", new { categoryName = "Self-Help" })">Self-Help</a></li>
                </ul>
            </nav>
        </div>
    </header>

    @* 2. Body *@
    <main class="site-content" style="background-color: rgb(252,252,234); max-width:1920px; margin: 0 auto;">
        @RenderBody()
    </main>

    @* 3. Footer *@
    <footer class="bg-dark text-light pt-5 pb-3 mt-auto">
        <div class="container">
            <div class="row">
                @* Section 1: Liên hệ *@
                <div class="col-md-4 mb-4" id="footer-section1">
                    <h5 class="text-uppercase font-weight-bold mb-3 text-warning">Liên hệ</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-envelope mr-2"></i> info@Bookara.com</li>
                        <li class="mb-2"><i class="fas fa-phone mr-2"></i> 0123 456 789</li>
                        <li class="mb-2"><i class="fas fa-map-marker-alt mr-2"></i> Hồ Chí Minh, Việt Nam</li>
                    </ul>
                </div>

                @* Section 2: Về Bookara Books *@
                <div class="col-md-4 mb-4" id="footer-section2">
                    <h5 class="text-uppercase font-weight-bold mb-3 text-warning">Về Bookara Books</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="@Url.Action("ContactUs", "Home")" class="text-light text-decoration-none hover-orange">
                                Liên hệ
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("AboutUs", "Home")" class="text-light text-decoration-none hover-orange">
                                Về chúng tôi
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("ReturnPolicy", "Home")" class="text-light text-decoration-none hover-orange">
                                Chính sách hoàn trả
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("PrivacyPolicy", "Home")" class="text-light text-decoration-none hover-orange">
                                Chính sách bảo mật
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("Shipping", "Home")" class="text-light text-decoration-none hover-orange">
                                Chính sách vận chuyển
                            </a>
                        </li>
                    </ul>
                </div>

                @* Section 3: Danh mục *@
                <div class="col-md-4 mb-4" id="footer-section3">
                    <h5 class="text-uppercase font-weight-bold mb-3 text-warning">Danh mục</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="@Url.Action("Index", "Category", new { categoryName = "Khoa-hoc" })" class="text-light text-decoration-none hover-orange">
                                Khoa học
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("Index", "Category", new { categoryName = "Tam-ly-hoc" })" class="text-light text-decoration-none hover-orange">
                                Tâm lý học
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("Index", "Category", new { categoryName = "Van-hoc" })" class="text-light text-decoration-none hover-orange">
                                Văn học
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("Index", "Category", new { categoryName = "Kinh-te" })" class="text-light text-decoration-none hover-orange">
                                Kinh tế
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="@Url.Action("Index", "Category", new { categoryName = "Self-Help" })" class="text-light text-decoration-none hover-orange">
                                Self-Help
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <hr class="bg-secondary my-3">

            @* Copyright *@
            <div class="row align-items-center">
                <div class="col-md-12 text-center">
                    <p class="mb-0 small text-muted">
                        &copy; 2025 <strong>Bookara</strong>. Tất cả quyền được bảo lưu.
                    </p>
                </div>
            </div>
        </div>
    </footer>


    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/Header.js"></script>
    @RenderSection("scripts", required: false)
</body>
</html>
